---
layout: post
title: 网站编码
permalink: /2014/11/encoding
---

<p>最近对一个asp.net的网站做了一些修改，其中就遇到了编码出错的问题。</p>
<p>情景：我在本地调试代码的时候没有任何的编码错误，但是当我上传到服务器上时就会出现乱码的情况。</p>
<p>我最初的解决方法：
>检查asp.net的网站和我的数据库编码是匹配，即我交给数据库时的编码是否是数据库接收时默认的编码。即mysql中的mysql_character_client的编码是否与我连接数据库时在配置文件或者>连接时设置的编码相同。
</p>
<p>后来的思路：</p>
>但是当我放到服务器上后情况就略有不同了，因为iis服务器也会设置编码方式。大致流程是Browse<->Server<->MySQL,要确保两两之间的连接编码格式是相同的，对于服务器和Mysql内部自己>的转码可以不用考虑。其实情况
> 就是这么简单，但是在我们通过服务器到浏览器的过程中可能会出现不可饶恕的错误。［我就是这种情况］
>原因：出现在我Server到浏览器的时候，使用的是系统默认的编码格式。但是我的服务器用的是英文版本，出现的cp850的西欧字符，但是浏览器用的是utf8，所以就出现了乱码。然而，我
>一开始并不认为是系统原因，因为我上传了三个系统，另外两个编码无问题，但是这个系统编码就有问题，而且我已经在服务器端设置了连接编码格式为UTF8。
>就是无法得到理想结果，后来汉化了操作系统，修改了操作系统的编码格式，解决了问题。由于最初的代码不是我写的［至少可以确定问题出现在asp.net项目中］，所以我没有找出具体哪行代码导致了这个问题，至少连>接部分我都确认过，是编码匹配的，唯一与往常不同的是这次运用到了MysqlDriverCs.dll的动态库，所以我猜可能是这个问题。
<p>网站编码出错的情况很常见，但是检查问题的思路最为重要，从数据库到服务器再到浏览器，步步匹配</p>
